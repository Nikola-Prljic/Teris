#include <iostream>
#include <raylib.h>

// 95 x 97

#define TILE_SIZE_X 48
#define TILE_SIZE_Y 48

typedef enum GameScreen { LOGO = 0, TITLE, GAMEPLAY, ENDING } GameScreen;

struct object {
    int x;
    int y;
};

object map[12][12] {

};

int draw_grid(Texture2D &t)
{
    for(int x = 0; x < 2; x++)
    {
        for(int y = 0; y < 2; y++)
        {
            DrawTexture(t, (x * TILE_SIZE_X - y * TILE_SIZE_Y) + 200, (x * TILE_SIZE_X + y * TILE_SIZE_Y) / 2 + 200, WHITE);
        }
    }
    //DrawTexture(t, 0, 0, WHITE);
    //DrawTexture(t, 46, 26, WHITE);
    return (0);
}

int main()
{
    const int screenWidth = 800;
    const int screenHeight = 600;
    std::string windowName = "Teris";
    InitWindow(screenWidth, screenHeight, windowName.c_str());

    Image grass = LoadImage("Isometric Medieval Pack/Isometric Medieval Pack/Sprites/Enviroument/Spring/grass.png");
    Texture2D texture_grass = LoadTextureFromImage(grass);
    UnloadImage(grass);

    GameScreen currentScreen = LOGO;

    int framesCounter = 0;
    SetTargetFPS(60);

    while(!WindowShouldClose())
    {
        BeginDrawing();
        ClearBackground(WHITE);

        switch (currentScreen)
        {
        case LOGO:
            DrawText("LOGO SCREEN", 20, 20, 40, LIGHTGRAY);
            framesCounter++;
            if (framesCounter > 120)
                currentScreen = TITLE;
            break;
        case TITLE:
            DrawText("TITLE SCREEN", 20, 20, 40, DARKGREEN);
            if (IsKeyPressed(KEY_ENTER) || IsGestureDetected(GESTURE_TAP))
                currentScreen = GAMEPLAY;
            break;
        case GAMEPLAY:
            DrawText("GAMEPLAY SCREEN", 20, 20, 40, MAROON);
            draw_grid(texture_grass);
            if (IsKeyPressed(KEY_ENTER) || IsGestureDetected(GESTURE_TAP))
                currentScreen = ENDING;
            break;
        case ENDING:
            DrawText("ENDING SCREEN", 20, 20, 40, DARKBLUE);
            if (IsKeyPressed(KEY_ENTER) || IsGestureDetected(GESTURE_TAP))
                currentScreen = TITLE;
            break;
        default:break;
        }

        EndDrawing();
    }

    CloseWindow();

    return (0);
}